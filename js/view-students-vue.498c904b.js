(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["view-students-vue"],{"055e":function(t,a,e){"use strict";e.r(a);var i=function(){var t=this,a=t.$createElement,i=t._self._c||a;return i("div",{staticClass:"contentlist"},[i("div",{staticClass:"flex-container"},[i("div",{staticClass:"columns m-t-10"},[i("div",{staticClass:"column",staticStyle:{display:"flex"}},[i("h1",{staticClass:"title",staticStyle:{"margin-bottom":"0","margin-right":"10px"}},[t._v("Mahasiswa")]),i("v-icon",{style:t.refresh?"transform:rotate(360deg)":"transform: none",on:{click:function(a){t.getData(),t.refresh=!0}}},[t._v("refresh")])],1)]),i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{staticStyle:{display:"flex"},attrs:{xs12:""}},[i("v-icon",{attrs:{color:"#C4C4C4"}},[t._v("fiber_manual_record")]),i("span",{staticStyle:{"align-self":"center"}},[t._v("Total Mahasiswa : "+t._s(t.users.length))])],1)],1),i("v-flex",{staticStyle:{"margin-top":"30px"},attrs:{xs12:""}},[i("v-card",{staticStyle:{"border-radius":"2px"},attrs:{text:""}},[i("v-container",{attrs:{"grid-list-md":""}},[i("v-layout",{attrs:{row:"",wrap:""}},[i("v-flex",{attrs:{xs12:"",sm3:""}},[i("b-field",[i("b-input",{attrs:{placeholder:"Search...",type:"search",icon:"magnify"},nativeOn:{keyup:function(a){return t.setTime()},keydown:function(a){return t.clearTime()}},model:{value:t.tempSearch,callback:function(a){t.tempSearch=a},expression:"tempSearch"}})],1)],1),i("v-flex",{staticStyle:{"justify-content":"right",display:"flex"},attrs:{xs12:"",sm9:""}},[i("b-button",{attrs:{type:"is-info"},on:{click:function(a){t.dialog=!0}}},[t._v("Tambah Mahasiswa")])],1)],1)],1)],1)],1),i("div",{staticStyle:{"margin-top":"20px"}},[i("b-table",{attrs:{data:t.usersList,paginated:!0,"per-page":t.perPage,"current-page":t.currentPage,loading:t.loadData,"pagination-simple":!0,narrowed:!0,"mobile-cards":!0,striped:!0,hoverable:!0,"default-sort-direction":t.defaultSortDirection,"default-sort":"created_at"},on:{"update:currentPage":function(a){t.currentPage=a},"update:current-page":function(a){t.currentPage=a}},scopedSlots:t._u([{key:"default",fn:function(a){return[i("b-table-column",{attrs:{label:"No",sortable:""}},[t._v(t._s(a.index+1))]),i("b-table-column",{attrs:{label:"Foto",sortable:""}},[i("v-img",{staticStyle:{width:"100px",height:"auto"},attrs:{src:t.$apiUrl+"/model/realpict/"+a.row.npm+".jpg"}})],1),i("b-table-column",{attrs:{field:"name",label:"Nama",sortable:""}},[t._v(t._s(a.row.name))]),i("b-table-column",{attrs:{field:"npm",label:"NPM",sortable:""}},[t._v(t._s(a.row.npm))]),i("b-table-column",{attrs:{field:"created_at",label:"Mendaftar Pada",sortable:""}},[t._v(t._s(a.row.created_at))]),i("b-table-column",{attrs:{label:""}},[i("v-menu",{attrs:{transition:"slide-x-transition","offset-x":"",left:""},scopedSlots:t._u([{key:"activator",fn:function(a){var e=a.on;return[i("v-btn",t._g({attrs:{icon:""}},e),[i("v-icon",[t._v("more_vert")])],1)]}}],null,!0)},[i("v-list",[i("v-list-item",{on:{click:function(e){e.preventDefault(),t.editDialog=!0,t.setEditData(a.row)}}},[i("v-list-item-title",[t._v("Edit")])],1),i("v-list-item",{on:{click:function(e){e.preventDefault(),t.deleteDialog=!0,t.deleteId=a.row.id}}},[i("v-list-item-title",[t._v("Hapus")])],1)],1)],1)],1)]}}])},[i("template",{slot:"empty"},[i("section",{staticClass:"section"},[i("div",{staticClass:"content has-text-grey has-text-centered"},[i("p",[i("b-icon",{attrs:{icon:"emoticon-sad",size:"is-large"}})],1),i("p",[t._v("Nothing here.")])])])])],2)],1)],1),i("v-row",{attrs:{justify:"center"}},[i("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.editDialog,callback:function(a){t.editDialog=a},expression:"editDialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v("Edit Data Mahasiswa")])]),i("v-card-text",[i("v-container",[i("div",{staticClass:"contentForm"},[i("div",{staticClass:"bodyForm"},[i("div",{staticClass:"fieldControll"},[i("div",{staticClass:"labelField"},[i("span",[t._v("Nama")])]),i("div",{staticClass:"inputField"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text"},domProps:{value:t.name},on:{input:function(a){a.target.composing||(t.name=a.target.value)}}})]),i("span",{staticClass:"fieldInfo",class:t.nameStat?"":"showFieldInfo"},[t._v("Nama tidak valid")])])])])])],1),i("v-card-actions",[i("v-spacer"),i("b-button",{staticStyle:{"margin-left":"10px",width:"100%","max-width":"120px"},attrs:{type:"is-danger"},on:{click:function(a){t.editDialog=!1}}},[t._v("Batal")]),i("b-button",{staticStyle:{"margin-left":"10px",width:"100%","max-width":"120px"},attrs:{type:"is-success"},on:{click:function(a){return t.updateData()}}},[t.uploading?i("img",{staticStyle:{width:"20px"},attrs:{src:e("54c8"),alt:""}}):i("span",[t._v("Perbaharui")])])],1)],1)],1)],1),i("v-row",{attrs:{justify:"center"}},[i("v-dialog",{attrs:{persistent:"","max-width":"600px"},model:{value:t.dialog,callback:function(a){t.dialog=a},expression:"dialog"}},[i("v-card",[i("v-card-title",[i("span",{staticClass:"headline"},[t._v("Data Mahasiswa")])]),i("v-card-text",[i("v-container",[0==t.detailData?i("div",{staticClass:"contentForm"},[i("div",{staticClass:"bodyForm"},[i("div",{staticClass:"fieldControll"},[i("div",{staticClass:"labelField"},[i("span",[t._v("Nama")])]),i("div",{staticClass:"inputField"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"name"}],attrs:{type:"text"},domProps:{value:t.name},on:{input:function(a){a.target.composing||(t.name=a.target.value)}}})]),i("span",{staticClass:"fieldInfo",class:t.nameStat?"":"showFieldInfo"},[t._v("Nama tidak valid")])]),i("div",{staticClass:"fieldControll"},[i("div",{staticClass:"labelField"},[i("span",[t._v("NPM")])]),i("div",{staticClass:"inputField"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.npm,expression:"npm"}],attrs:{type:"text"},domProps:{value:t.npm},on:{input:function(a){a.target.composing||(t.npm=a.target.value)}}})]),i("span",{staticClass:"fieldInfo",class:t.npmStat?"":"showFieldInfo"},[t._v("NPM tidak valid")])])])]):t._e(),1==t.detailData||t.cameraStat?i("div",{staticClass:"cameraForm",staticStyle:{"min-height":"380px"},style:t.cameradisp?"":"display: none"},[i("div",{style:t.uploading?"":"display: none"},[i("img",{attrs:{src:t.img,alt:""}})]),i("web-cam",{ref:"webcam",style:t.uploading?"display: none":"",attrs:{"device-id":t.deviceId,width:"100%"},on:{cameras:t.onCameras,"camera-change":t.onCameraChange}}),i("div",{staticClass:"deviceoption"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.camera,expression:"camera"}],on:{change:function(a){var e=Array.prototype.filter.call(a.target.options,(function(t){return t.selected})).map((function(t){var a="_value"in t?t._value:t.value;return a}));t.camera=a.target.multiple?e:e[0]}}},[i("option",[t._v("-- Select Device --")]),t._l(t.devices,(function(a){return i("option",{key:a.deviceId,domProps:{value:a.deviceId}},[t._v(t._s(a.label))])}))],2)])],1):t._e()])],1),i("v-card-actions",[i("v-spacer"),0==t.detailData?i("b-button",{staticStyle:{"margin-left":"10px",width:"100%","max-width":"120px"},attrs:{type:"is-danger"},on:{click:function(a){t.dialog=!1,t.closeCamera()}}},[t._v("Batal")]):t._e(),1==t.detailData?i("b-button",{staticStyle:{"margin-left":"10px",width:"100%","max-width":"120px"},attrs:{type:"is-danger"},on:{click:function(a){t.detailData=0,t.cameradisp=!1}}},[t._v("Kembali")]):t._e(),0==t.detailData?i("b-button",{staticStyle:{"margin-left":"10px",width:"100%","max-width":"120px"},attrs:{type:"is-warning"},on:{click:function(a){t.setDetail(),t.cameradisp=!0}}},[t._v("Lanjut")]):t._e(),1==t.detailData?i("b-button",{staticStyle:{"margin-left":"10px",width:"100%","max-width":"120px"},attrs:{type:"is-success"},on:{click:function(a){return t.sendData()}}},[t.uploading?i("img",{staticStyle:{width:"20px"},attrs:{src:e("54c8"),alt:""}}):i("span",[t._v("Daftarkan")])]):t._e()],1)],1)],1)],1),i("v-row",{attrs:{justify:"center"}},[i("v-dialog",{attrs:{"max-width":"290"},model:{value:t.deleteDialog,callback:function(a){t.deleteDialog=a},expression:"deleteDialog"}},[i("v-card",[i("v-card-title",{staticClass:"headline"},[t._v("Hapus data mahasiswa ini ?")]),i("v-card-text",[t._v(" Data mahasiswa akan dihapus beserta dengan foto yang sudah pernah diambil. ")]),i("v-card-actions",[i("v-spacer"),i("b-button",{staticStyle:{"margin-left":"10px",width:"100%","max-width":"120px"},attrs:{type:"is-warning"},on:{click:function(a){t.deleteDialog=!1,t.deleteId=-1}}},[t._v("Batal")]),i("b-button",{staticStyle:{"margin-left":"10px",width:"100%","max-width":"120px"},attrs:{type:"is-danger"},on:{click:function(a){return t.deleteData()}}},[t.uploading?i("img",{staticStyle:{width:"20px"},attrs:{src:e("54c8"),alt:""}}):i("span",[t._v("Hapus")])])],1)],1)],1)],1),i("v-snackbar",{attrs:{color:t.snackbar.color,"multi-line":!0,timeout:3e3},model:{value:t.snackbar.disp,callback:function(a){t.$set(t.snackbar,"disp",a)},expression:"snackbar.disp"}},[t._v(" "+t._s(t.snackbar.text)+" "),i("v-btn",{attrs:{dark:"",text:""},on:{click:function(a){t.snackbar.disp=!1}}},[t._v("Close")])],1)],1)},s=[],n=(e("4de4"),e("7db0"),e("caad"),e("fb6a"),e("b0c0"),e("ac1f"),e("2532"),e("841c"),e("f4e8")),r=e("b3cb"),l={headers:{Authorization:"Bearer "+localStorage.getItem("token")}},c={components:{WebCam:r["WebCam"]},mounted:function(){this.getData()},data:function(){return{deleteDialog:!1,deleteId:-1,editDialog:!1,npm:"160708967",uploading:!1,percentCompleted:0,isActiveCamera:!0,cameradisp:!1,cameraStat:!1,detailData:0,data:new FormData,name:null,nameStat:!0,npmStat:!0,dialog:!1,snackbar:{color:"#d32f2f",text:"msg",disp:!1},editData:{},users:[],refresh:!1,typingTimer:null,tempSearch:"",wajib:!0,search:"",loadData:!0,defaultSortDirection:"desc",currentPage:1,perPage:10,isPaginated:!0,isPaginationSimple:!0,img:null,camera:null,deviceId:null,devices:[]}},watch:{camera:function(t){this.deviceId=t},devices:function(){var t=Object(n["a"])(this.devices),a=t[0];t.slice(1);a&&(this.camera=a.deviceId,this.deviceId=a.deviceId)}},computed:{device:function(){var t=this;return this.devices.find((function(a){return a.deviceId===t.deviceId}))},usersList:function(){var t=this;return this.users.filter((function(a){return""==t.search||a.name.toLowerCase().includes(t.search.toLowerCase())}))}},methods:{deleteData:function(){var t=this.$apiUrl+"/api/student/"+this.deleteId;this.uploading=!0;var a=this;this.$http.delete(t,l).then((function(t){a.snackbar.disp=!0,a.snackbar.text=t.data.msg,a.snackbar.color="#32bdca",a.uploading=!1,a.deleteDialog=!1,a.reset()})).catch((function(t){a.snackbar.disp=!!t,a.snackbar.text="Coba lagi",a.snackbar.color="#d32f2f",a.uploading=!1}))},setEditData:function(t){this.editData.id=t.id,this.name=t.name,this.npm=t.npm},updateData:function(){if(this.validation()){var t=this.$apiUrl+"/api/student/"+this.editData.id;this.uploading=!0,this.editData.name=this.name,this.editData.npm=this.npm;var a=this;this.$http.post(t,this.editData,l).then((function(t){a.snackbar.disp=!0,a.snackbar.text=t.data.msg,a.snackbar.color="#32bdca",a.uploading=!1,a.editDialog=!1,a.reset()})).catch((function(t){a.snackbar.disp=!!t,a.snackbar.text="Coba lagi",a.snackbar.color="#d32f2f",a.uploading=!1}))}},reset:function(){this.detailData=0,this.cameradisp=!1,this.dialog=!1,this.closeCamera(),this.data=new FormData,this.name=null,this.npm="160708967",this.getData()},preparedata:function(){this.data=new FormData,this.data.append("name",this.name),this.data.append("npm",this.npm),this.img=this.$refs.webcam.capture(),this.data.append("picture",this.img)},sendData:function(){this.preparedata(),this.percentCompleted=0,this.uploading=!0;var t={headers:{"Content-Type":"multipart/form-data",Authorization:"Bearer "+localStorage.getItem("token")},onUploadProgress:function(t){this.percentCompleted=Math.round(100*t.loaded/t.total),this.$forceUpdate()}.bind(this)},a=this.$modelUrl+"/students",e=this;this.$http.post(a,this.data,t).then(function(t){e.snackbar.disp=!0,e.snackbar.text=t.data.msg,e.snackbar.color="#32bdca",e.uploading=!1,e.reset()}.bind(this)).catch((function(t){e.percentCompleted=0,e.snackbar.disp=!!t,e.snackbar.text="Coba lagi",e.snackbar.color="#d32f2f",e.uploading=!1}))},onCapture:function(){this.img=this.$refs.webcam.capture()},onCameras:function(t){this.devices=t},onCameraChange:function(t){this.deviceId=t,this.camera=t},closeCamera:function(){this.isActiveCamera=!1;try{this.$refs.webcam.stop()}catch(t){this.isActiveCamera=!1}},validation:function(){return this.nameStat=!0,this.npmStat=!0,null!=this.name&&""!=this.name&&/^[a-zA-Z][a-zA-Z\. ]*$/.test(this.name)?null!=this.npm&&""!=this.npm&&!/^[a-zA-Z][a-zA-Z\. ]*$/.test(this.npm)||(this.npmStat=!1,!1):(this.nameStat=!1,!1)},setDetail:function(){this.validation()&&(this.detailData=1,this.cameraStat=!0,this.isActiveCamera||(this.$refs.webcam.start(),this.isActiveCamera=!0))},setTime:function(){this.loadData=!0,clearTimeout(this.typingTimer),this.typingTimer=setTimeout(this.setSearch,2e3)},clearTime:function(){clearTimeout(this.typingTimer)},setSearch:function(){this.loadData=!1,this.search=this.tempSearch},getData:function(){var t=this;this.loadData=!0;var a=this.$apiUrl+"/api/students";this.$http.get(a,l).then((function(a){t.users=a.data,t.loadData=!1}))}}},o=c,d=(e("752d"),e("2877")),p=Object(d["a"])(o,i,s,!1,null,"20b2422c",null);a["default"]=p.exports},"752d":function(t,a,e){"use strict";var i=e("d76c"),s=e.n(i);s.a},d76c:function(t,a,e){}}]);
//# sourceMappingURL=view-students-vue.498c904b.js.map